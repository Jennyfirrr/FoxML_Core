# Live Trading Configuration
# ==========================
#
# Configuration for the LIVE_TRADING execution engine.
# Values here override defaults in LIVE_TRADING/common/constants.py
#
# Access via: get_cfg("live_trading.xyz", default=fallback)

live_trading:
  # Trading horizons (in order from shortest to longest)
  horizons:
    - "5m"
    - "10m"
    - "15m"
    - "30m"
    - "60m"
    - "1d"

  # ==========================================================================
  # Blending Configuration
  # ==========================================================================
  blending:
    # Ridge regularization parameter for risk-parity blending
    # Higher values -> more equal weights, lower values -> more concentrated
    ridge_lambda: 0.15

    # Temperature compression per horizon
    # Lower temperatures -> more concentrated weights (sharpen best models)
    # T=1.0 means no compression
    temperature:
      "5m": 0.75   # More aggressive sharpening for short horizons
      "10m": 0.85
      "15m": 0.90
      "30m": 1.0
      "60m": 1.0
      "1d": 1.0

  # ==========================================================================
  # Cost Model Configuration
  # ==========================================================================
  cost_model:
    # Coefficients for: net_h = alpha - k1*spread - k2*vol*sqrt(h/5) - k3*impact
    k1: 1.0      # Spread penalty coefficient
    k2: 0.15     # Volatility timing penalty
    k3: 1.0      # Market impact coefficient

  # ==========================================================================
  # Barrier Gate Configuration
  # ==========================================================================
  barrier_gate:
    # Minimum gate value (floor)
    g_min: 0.2

    # Gate formula: g = max(g_min, (1-p_peak)^gamma * (0.5+0.5*p_valley)^delta)
    gamma: 1.0   # Peak penalty exponent
    delta: 0.5   # Valley bonus exponent

    # Thresholds for blocking/preferring entries
    peak_threshold: 0.6     # Block long if p_peak > threshold
    valley_threshold: 0.55  # Prefer entry if p_valley > threshold

  # ==========================================================================
  # Spread Gate Configuration
  # ==========================================================================
  spread_gate:
    # Maximum spread in basis points for trading
    max_spread_bps: 12.0

    # Quote age limits
    quote_age_max_ms: 200.0

  # ==========================================================================
  # Position Sizing Configuration
  # ==========================================================================
  sizing:
    # Maximum z-score for sizing (clips alpha/vol ratio)
    z_max: 3.0

    # Maximum weight for any single position (5%)
    max_weight: 0.05

    # Target gross exposure (50%)
    gross_target: 0.5

    # No-trade band - don't trade if weight change < this
    no_trade_band: 0.008  # 80 bps

  # ==========================================================================
  # Risk Management Configuration
  # ==========================================================================
  risk:
    # Kill switch: daily loss percentage (triggers trading halt)
    max_daily_loss_pct: 2.0

    # Kill switch: maximum drawdown from peak
    max_drawdown_pct: 10.0

    # Maximum single position as percentage of portfolio
    max_position_pct: 20.0

    # Maximum gross exposure (100% = fully invested)
    max_gross_exposure: 1.0

    # Data quality thresholds
    spread_max_bps: 12.0
    quote_age_max_ms: 200.0
    latency_warn_ms: 2000.0

  # ==========================================================================
  # Paper Trading Configuration
  # ==========================================================================
  paper:
    # Starting capital
    initial_cash: 100000.0

    # Simulated slippage in basis points
    slippage_bps: 5.0

    # Simulated fee in basis points
    fee_bps: 1.0

    # Trade log directory
    log_dir: "logs/paper_trades"

  # ==========================================================================
  # Model Loading Configuration
  # ==========================================================================
  models:
    # Default run ID to load models from (can be overridden at runtime)
    # default_run_id: null

    # Model families to load (subset of all available)
    families:
      - "LightGBM"
      - "XGBoost"
      - "MLP"
      - "LSTM"
      - "Transformer"

    # Whether to load experimental families
    include_experimental: false

  # ==========================================================================
  # Engine Configuration
  # ==========================================================================
  engine:
    # Trading cycle interval in seconds
    cycle_interval_seconds: 60

    # Maximum symbols to process per cycle
    max_symbols_per_cycle: 100

    # Whether to run in simulation mode (no real orders)
    simulation_mode: true

    # Logging level for trade decisions
    decision_log_level: "INFO"
